{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-hex.js\";\nimport \"core-js/modules/esnext.uint8-array.to-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.to-hex.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport AppHeader from '@/components/Header.vue';\nexport default {\n  name: 'CartView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      cartItems: [],\n      cartCount: 0,\n      showContactModal: false,\n      showTelegramInstructions: false,\n      customerInfo: {\n        name: '',\n        telegram: '',\n        email: ''\n      },\n      currentMessage: ''\n    };\n  },\n  computed: {\n    canSubmitQuote() {\n      return this.customerInfo.name.trim() !== '' && this.customerInfo.telegram.trim() !== '' && this.cartItems.length > 0;\n    },\n    totalFiles() {\n      return this.cartItems.length;\n    },\n    hasImageFiles() {\n      return this.cartItems.some(item => this.isImageFile(item.file));\n    },\n    imageFilesCount() {\n      return this.cartItems.filter(item => this.isImageFile(item.file)).length;\n    }\n  },\n  mounted() {\n    this.loadCart();\n  },\n  methods: {\n    // M√©todo seguro para verificar si es imagen\n    isImageFile(file) {\n      return file && file.type && file.type.includes('image');\n    },\n    loadCart() {\n      const savedCart = localStorage.getItem('pigmaprint_cart');\n      if (savedCart) {\n        try {\n          const cartData = JSON.parse(savedCart);\n          this.cartItems = cartData.map(item => {\n            if (item.fileData && !item.file) {\n              const file = this.dataURLtoFile(item.fileData, item.fileName);\n              return {\n                ...item,\n                file: file\n              };\n            }\n            return {\n              ...item,\n              file: item.file || null // Asegurar que file no sea undefined\n            };\n          });\n          this.cartCount = this.cartItems.length;\n        } catch (error) {\n          console.error('Error loading cart:', error);\n          this.cartItems = [];\n          this.cartCount = 0;\n        }\n      }\n    },\n    dataURLtoFile(dataurl, filename) {\n      if (!dataurl) return null;\n      try {\n        const arr = dataurl.split(',');\n        const mime = arr[0].match(/:(.*?);/)[1];\n        const bstr = atob(arr[1]);\n        let n = bstr.length;\n        const u8arr = new Uint8Array(n);\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new File([u8arr], filename, {\n          type: mime\n        });\n      } catch (error) {\n        console.error('Error converting dataURL to File:', error);\n        return null;\n      }\n    },\n    getProductIcon(productType) {\n      const icons = {\n        camiseta: 'checkroom',\n        taza: 'coffee',\n        termo: 'water_bottle',\n        gorra: 'sports_baseball',\n        vaso: 'liquor',\n        hoodie: 'account_circle',\n        otros: 'category'\n      };\n      return icons[productType] || 'category';\n    },\n    getProductTypeLabel(productType) {\n      const labels = {\n        camiseta: 'Camiseta',\n        taza: 'Taza',\n        termo: 'Termo',\n        gorra: 'Gorra',\n        vaso: 'Vaso T√©rmico',\n        hoodie: 'Hoodie',\n        otros: 'Otro Producto'\n      };\n      return labels[productType] || 'Producto';\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'Fecha no disponible';\n      try {\n        const date = new Date(dateString);\n        return date.toLocaleDateString('es-ES', {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        });\n      } catch (error) {\n        return 'Fecha inv√°lida';\n      }\n    },\n    formatFileSize(bytes) {\n      if (!bytes) return 'N/A';\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    getFilePreview(file) {\n      if (!file) return '';\n      try {\n        return URL.createObjectURL(file);\n      } catch (error) {\n        return '';\n      }\n    },\n    removeItem(itemId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId);\n      this.saveCart();\n      this.cartCount = this.cartItems.length;\n    },\n    clearCart() {\n      if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {\n        this.cartItems = [];\n        this.saveCart();\n        this.cartCount = 0;\n      }\n    },\n    saveCart() {\n      try {\n        const cartToSave = this.cartItems.map(item => ({\n          id: item.id,\n          productType: item.productType,\n          productName: item.productName,\n          fileName: item.fileName,\n          notes: item.notes,\n          date: item.date,\n          fileData: item.file ? this.fileToDataURL(item.file) : null\n        }));\n        localStorage.setItem('pigmaprint_cart', JSON.stringify(cartToSave));\n      } catch (error) {\n        console.error('Error saving cart:', error);\n      }\n    },\n    async fileToDataURL(file) {\n      if (!file) return null;\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = e => resolve(e.target.result);\n        reader.onerror = () => resolve(null);\n        reader.readAsDataURL(file);\n      });\n    },\n    // PREPARAR PARA TELEGRAM\n    async prepareForTelegram() {\n      if (!this.canSubmitQuote) {\n        alert('Por favor completa tu informaci√≥n de contacto');\n        return;\n      }\n      try {\n        // Crear mensaje detallado\n        this.currentMessage = this.createDetailedMessage();\n\n        // Copiar mensaje al portapapeles\n        await this.copyToClipboard(this.currentMessage);\n\n        // Cerrar modal de contacto\n        this.showContactModal = false;\n\n        // Mostrar instrucciones para Telegram\n        setTimeout(() => {\n          this.showTelegramInstructions = true;\n        }, 300);\n      } catch (error) {\n        console.error('Error preparando para Telegram:', error);\n        alert('Error al preparar el mensaje. Por favor intenta manualmente.');\n      }\n    },\n    // COPIAR AL PORTAPAPELES\n    async copyToClipboard(text) {\n      try {\n        await navigator.clipboard.writeText(text);\n        return true;\n      } catch (error) {\n        // Fallback para navegadores antiguos\n        try {\n          const textArea = document.createElement('textarea');\n          textArea.value = text;\n          document.body.appendChild(textArea);\n          textArea.select();\n          document.execCommand('copy');\n          document.body.removeChild(textArea);\n          return true;\n        } catch (fallbackError) {\n          console.error('Error copying to clipboard:', fallbackError);\n          return false;\n        }\n      }\n    },\n    // COPIAR MENSAJE NUEVAMENTE\n    async copyMessageAgain() {\n      const success = await this.copyToClipboard(this.currentMessage);\n      if (success) {\n        alert('‚úÖ Mensaje copiado nuevamente al portapapeles');\n      } else {\n        alert('‚ùå Error al copiar el mensaje. Por favor copia manualmente.');\n      }\n    },\n    // ABRIR TELEGRAM\n    openTelegram() {\n      window.open('https://t.me/Pigmaprint', '_blank', 'noopener,noreferrer');\n    },\n    // CREAR MENSAJE DETALLADO\n    createDetailedMessage() {\n      const currentDate = new Date().toLocaleDateString('es-ES', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n      let message = `¬°Hola Pigmaprint! üé®\\n\\n`;\n      message += `SOLICITUD DE COTIZACI√ìN - PEDIDO COMPLETO\\n\\n`;\n\n      // Informaci√≥n del cliente\n      message += `üë§ INFORMACI√ìN DEL CLIENTE\\n`;\n      message += `‚Ä¢ Nombre: ${this.customerInfo.name}\\n`;\n      message += `‚Ä¢ Telegram: ${this.customerInfo.telegram}\\n`;\n      if (this.customerInfo.email) {\n        message += `‚Ä¢ Email: ${this.customerInfo.email}\\n`;\n      }\n      message += `‚Ä¢ Fecha: ${currentDate}\\n\\n`;\n\n      // Resumen del pedido\n      message += `üì¶ RESUMEN DEL PEDIDO\\n`;\n      message += `‚Ä¢ Total productos: ${this.cartItems.length}\\n`;\n      message += `‚Ä¢ Archivos adjuntos: ${this.totalFiles}\\n`;\n      message += `‚Ä¢ Im√°genes incluidas: ${this.imageFilesCount}\\n\\n`;\n\n      // Detalles de productos\n      message += `üé® DETALLES DE PRODUCTOS\\n\\n`;\n      this.cartItems.forEach((item, index) => {\n        message += `${index + 1}. ${this.getProductTypeLabel(item.productType)}\\n`;\n        message += `   üìÅ Archivo: ${item.fileName}\\n`;\n        message += `   üìè Tama√±o: ${this.formatFileSize(item.file?.size)}\\n`;\n        message += `   üè∑Ô∏è Producto: ${item.productName}\\n`;\n        if (item.notes && item.notes.trim() !== '') {\n          message += `   üí¨ Instrucciones: ${item.notes}\\n`;\n        }\n        if (this.isImageFile(item.file)) {\n          message += `   üñºÔ∏è Tipo: Imagen (adjuntada)\\n`;\n        }\n        message += `\\n`;\n      });\n      message += `üí° INFORMACI√ìN ADICIONAL\\n`;\n      message += `He adjuntado todas las im√°genes solicitadas. Por favor env√≠enme la cotizaci√≥n completa con precios y tiempos de entrega.\\n\\n`;\n      message += `¬°Quedo atento(a) a su respuesta! üôè\\n\\n`;\n      message += `---\\n`;\n      message += `Mensaje generado desde Pigmaprint Web`;\n      return message;\n    }\n  }\n};","map":{"version":3,"names":["AppHeader","name","components","data","cartItems","cartCount","showContactModal","showTelegramInstructions","customerInfo","telegram","email","currentMessage","computed","canSubmitQuote","trim","length","totalFiles","hasImageFiles","some","item","isImageFile","file","imageFilesCount","filter","mounted","loadCart","methods","type","includes","savedCart","localStorage","getItem","cartData","JSON","parse","map","fileData","dataURLtoFile","fileName","error","console","dataurl","filename","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","getProductIcon","productType","icons","camiseta","taza","termo","gorra","vaso","hoodie","otros","getProductTypeLabel","labels","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getFilePreview","URL","createObjectURL","removeItem","itemId","id","saveCart","clearCart","confirm","cartToSave","productName","notes","fileToDataURL","setItem","stringify","Promise","resolve","reader","FileReader","onload","e","target","result","onerror","readAsDataURL","prepareForTelegram","alert","createDetailedMessage","copyToClipboard","setTimeout","text","navigator","clipboard","writeText","textArea","document","createElement","value","body","appendChild","select","execCommand","removeChild","fallbackError","copyMessageAgain","success","openTelegram","window","open","currentDate","weekday","message","forEach","index","size"],"sources":["/home/jorge/Escritorio/Jorge-PC/Marlen/pigmaprint-marlen-romero/src/views/Cart.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\n    <AppHeader :cart-count=\"cartCount\" />\n    \n    <main class=\"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div class=\"max-w-6xl mx-auto\">\n        <!-- Header del Carrito -->\n        <div class=\"text-center mb-12\">\n          <h1 class=\"text-4xl sm:text-5xl font-extrabold tracking-tight bg-gradient-to-r from-purple-600 to-blue-500 bg-clip-text text-transparent\">\n            Tu Carrito\n          </h1>\n          <p class=\"mt-4 text-lg text-gray-600 dark:text-gray-300\">\n            Revisa y gestiona tus productos personalizados\n          </p>\n        </div>\n\n        <!-- Carrito Vac√≠o -->\n        <div v-if=\"cartItems.length === 0\" class=\"text-center bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12\">\n          <div class=\"text-6xl text-purple-400 mb-6\">\n            <span class=\"material-symbols-outlined\">shopping_cart</span>\n          </div>\n          <h3 class=\"text-2xl font-bold text-gray-800 dark:text-white mb-4\">\n            Tu carrito est√° vac√≠o\n          </h3>\n          <p class=\"text-gray-600 dark:text-gray-300 mb-8 max-w-md mx-auto\">\n            Agrega algunos productos personalizados para comenzar tu pedido.\n          </p>\n          <button \n            @click=\"$router.push('/')\"\n            class=\"px-8 py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:from-purple-600 hover:to-blue-600 transition-all duration-300 transform hover:-translate-y-0.5\"\n          >\n            <span class=\"material-symbols-outlined align-middle mr-2\">add_circle</span>\n            Agregar Productos\n          </button>\n        </div>\n\n        <!-- Carrito con Productos -->\n        <div v-else class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <!-- Lista de Productos -->\n          <div class=\"lg:col-span-2 space-y-6\">\n            <!-- Productos -->\n            <div \n              v-for=\"item in cartItems\" \n              :key=\"item.id\"\n              class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl\"\n            >\n              <div class=\"flex flex-col sm:flex-row gap-6\">\n                <!-- Vista previa de la imagen -->\n                <div class=\"flex-shrink-0 w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center overflow-hidden\">\n                  <img \n                    v-if=\"isImageFile(item.file)\"\n                    :src=\"getFilePreview(item.file)\"\n                    :alt=\"item.productName\"\n                    class=\"w-full h-full object-cover\"\n                  >\n                  <span v-else class=\"material-symbols-outlined text-3xl text-purple-600 dark:text-purple-400\">\n                    {{ getProductIcon(item.productType) }}\n                  </span>\n                </div>\n\n                <!-- Informaci√≥n del Producto -->\n                <div class=\"flex-grow\">\n                  <div class=\"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4\">\n                    <div>\n                      <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-2\">\n                        {{ item.productName }}\n                      </h3>\n                      <p class=\"text-gray-600 dark:text-gray-300 text-sm\">\n                        Archivo: {{ item.fileName }}\n                      </p>\n                      <p v-if=\"item.notes\" class=\"text-gray-500 dark:text-gray-400 text-sm mt-2\">\n                        Notas: {{ item.notes }}\n                      </p>\n                      <p class=\"text-gray-600 dark:text-gray-300 text-sm mt-1\">\n                        Tipo: {{ getProductTypeLabel(item.productType) }}\n                      </p>\n                    </div>\n                    \n                    <!-- Precio (placeholder) -->\n                    <div class=\"mt-2 sm:mt-0 text-right\">\n                      <p class=\"text-lg font-bold text-purple-600 dark:text-purple-400\">\n                        Por cotizar\n                      </p>\n                      <p class=\"text-sm text-gray-500 dark:text-gray-400\">\n                        {{ formatDate(item.date) }}\n                      </p>\n                    </div>\n                  </div>\n\n                  <!-- Acciones -->\n                  <div class=\"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <span class=\"text-sm text-gray-500 dark:text-gray-400\">\n                      Tama√±o archivo: {{ formatFileSize(item.file?.size) }}\n                    </span>\n                    \n                    <button \n                      @click=\"removeItem(item.id)\"\n                      class=\"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200 flex items-center\"\n                    >\n                      <span class=\"material-symbols-outlined text-lg mr-1\">delete</span>\n                      Eliminar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Resumen del Pedido -->\n          <div class=\"lg:col-span-1\">\n            <div class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 sticky top-6\">\n              <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-6\">\n                Resumen del Pedido\n              </h3>\n\n              <!-- Detalles -->\n              <div class=\"space-y-4 mb-6\">\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Productos:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ cartItems.length }}\n                  </span>\n                </div>\n                \n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Archivos:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ totalFiles }}\n                  </span>\n                </div>\n\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Im√°genes:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ imageFilesCount }}\n                  </span>\n                </div>\n\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Estado:</span>\n                  <span class=\"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-full text-sm font-medium\">\n                    Por cotizar\n                  </span>\n                </div>\n              </div>\n\n              <!-- Total -->\n              <div class=\"border-t border-gray-200 dark:border-gray-700 pt-4 mb-6\">\n                <div class=\"flex justify-between items-center text-lg font-bold\">\n                  <span class=\"text-gray-800 dark:text-white\">Total estimado:</span>\n                  <span class=\"text-purple-600 dark:text-purple-400\">\n                    Por cotizar\n                  </span>\n                </div>\n                <p class=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">\n                  * Los precios finales ser√°n confirmados por nuestro equipo\n                </p>\n              </div>\n\n              <!-- Botones de Acci√≥n -->\n              <div class=\"space-y-4\">\n                <button \n                  @click=\"showContactModal = true\"\n                  :disabled=\"cartItems.length === 0\"\n                  :class=\"[\n                    'w-full px-6 py-4 rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 flex items-center justify-center',\n                    cartItems.length > 0\n                      ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:shadow-xl hover:from-blue-600 hover:to-purple-700'\n                      : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                  ]\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">telegram</span>\n                  Enviar por Telegram\n                </button>\n                \n                <button \n                  @click=\"$router.push('/')\"\n                  class=\"w-full px-6 py-4 border-2 border-purple-500 text-purple-600 dark:text-purple-400 dark:border-purple-400 rounded-xl font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-300 flex items-center justify-center\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">add_circle</span>\n                  Agregar M√°s Productos\n                </button>\n                \n                <button \n                  @click=\"clearCart\"\n                  class=\"w-full px-6 py-4 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200 flex items-center justify-center\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">delete_sweep</span>\n                  Vaciar Carrito\n                </button>\n              </div>\n\n              <!-- Informaci√≥n Adicional -->\n              <div class=\"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"material-symbols-outlined text-blue-500 text-lg mt-0.5\">info</span>\n                  <div>\n                    <p class=\"text-sm text-blue-700 dark:text-blue-300\">\n                      Env√≠a tu pedido por Telegram para adjuntar im√°genes directamente.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n\n    <!-- Modal de Informaci√≥n de Contacto -->\n    <transition name=\"modal-fade\">\n      <div \n        v-if=\"showContactModal\" \n        class=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-all duration-300\"\n        @click.self=\"showContactModal = false\"\n      >\n        <div class=\"relative bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-500 scale-95 hover:scale-100\">\n          <!-- Header -->\n          <div class=\"bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-3xl p-8 text-center\">\n            <div class=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm\">\n              <span class=\"material-symbols-outlined text-4xl text-white\">\n                person\n              </span>\n            </div>\n            <h3 class=\"text-2xl font-bold text-white mb-2\">\n              Informaci√≥n de Contacto\n            </h3>\n            <p class=\"text-white/90\">\n              Completa tus datos para la cotizaci√≥n\n            </p>\n          </div>\n\n          <!-- Formulario -->\n          <div class=\"p-6\">\n            <div class=\"space-y-4\">\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Tu Nombre Completo *\n                </label>\n                <input \n                  v-model=\"customerInfo.name\"\n                  type=\"text\"\n                  class=\"w-full rounded-xl p-4 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"Ej: Mar√≠a Gonz√°lez\"\n                  required\n                >\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Tu Usuario de Telegram *\n                </label>\n                <input \n                  v-model=\"customerInfo.telegram\"\n                  type=\"text\"\n                  class=\"w-full rounded-xl p-4 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"Ej: @tu_usuario\"\n                  required\n                >\n                <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  Tu nombre de usuario de Telegram (con @)\n                </p>\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Tu Email (Opcional)\n                </label>\n                <input \n                  v-model=\"customerInfo.email\"\n                  type=\"email\"\n                  class=\"w-full rounded-xl p-4 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"Ej: tu@email.com\"\n                >\n              </div>\n            </div>\n\n            <!-- Resumen del pedido -->\n            <div class=\"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl\">\n              <h4 class=\"font-semibold text-gray-800 dark:text-white mb-2\">\n                Resumen de tu pedido:\n              </h4>\n              <ul class=\"text-sm text-gray-600 dark:text-gray-300 space-y-1\">\n                <li v-for=\"item in cartItems\" :key=\"item.id\">\n                  ‚Ä¢ {{ item.productName }} - {{ item.fileName }}\n                </li>\n              </ul>\n              <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                Total: {{ cartItems.length }} producto(s) - {{ imageFilesCount }} imagen(es)\n              </p>\n            </div>\n\n            <!-- Instrucciones para Telegram -->\n            <div class=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n              <h4 class=\"font-semibold text-blue-800 dark:text-blue-300 mb-2 flex items-center\">\n                <span class=\"material-symbols-outlined mr-2 text-blue-500\">info</span>\n                Para enviar por Telegram:\n              </h4>\n              <ol class=\"text-sm text-blue-700 dark:text-blue-300 space-y-1 text-left\">\n                <li>1. Copiaremos tu mensaje autom√°ticamente</li>\n                <li>2. Abre Telegram manualmente</li>\n                <li>3. Busca a: <strong>@Pigmaprint</strong></li>\n                <li>4. Pega el mensaje y adjunta las im√°genes</li>\n              </ol>\n            </div>\n\n            <!-- Botones -->\n            <div class=\"flex gap-3 mt-6\">\n              <button \n                @click=\"showContactModal = false\"\n                class=\"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300\"\n              >\n                Cancelar\n              </button>\n              \n              <button \n                @click=\"prepareForTelegram\"\n                :disabled=\"!canSubmitQuote\"\n                :class=\"[\n                  'flex-1 px-4 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:-translate-y-0.5 flex items-center justify-center',\n                  canSubmitQuote\n                    ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-purple-700'\n                    : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                ]\"\n              >\n                <span class=\"material-symbols-outlined mr-2\">send</span>\n                Copiar y Enviar\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n\n    <!-- Modal de Instrucciones para Telegram -->\n    <transition name=\"modal-fade\">\n      <div \n        v-if=\"showTelegramInstructions\" \n        class=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-all duration-300\"\n        @click.self=\"showTelegramInstructions = false\"\n      >\n        <div class=\"relative bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-500\">\n          <!-- Header -->\n          <div class=\"bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-3xl p-8 text-center\">\n            <div class=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm\">\n              <span class=\"material-symbols-outlined text-4xl text-white\">\n                telegram\n              </span>\n            </div>\n            <h3 class=\"text-2xl font-bold text-white mb-2\">\n              ¬°Listo para Telegram!\n            </h3>\n            <p class=\"text-white/90\">\n              Sigue estos pasos para enviar tu pedido\n            </p>\n          </div>\n\n          <!-- Contenido -->\n          <div class=\"p-6\">\n            <div class=\"space-y-4\">\n              <!-- Mensaje copiado -->\n              <div class=\"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800\">\n                <p class=\"text-green-700 dark:text-green-300 text-sm font-medium\">\n                  ‚úÖ El mensaje de tu pedido ha sido copiado al portapapeles\n                </p>\n              </div>\n\n              <!-- Pasos -->\n              <div class=\"space-y-3\">\n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full text-sm flex items-center justify-center font-bold mt-0.5\">1</span>\n                  <p class=\"text-gray-700 dark:text-gray-300 text-sm\">\n                    <strong>Abre Telegram</strong> en tu dispositivo\n                  </p>\n                </div>\n                \n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full text-sm flex items-center justify-center font-bold mt-0.5\">2</span>\n                  <p class=\"text-gray-700 dark:text-gray-300 text-sm\">\n                    <strong>Busca a:</strong> \n                    <span class=\"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded font-mono text-xs\">@Pigmaprint</span>\n                  </p>\n                </div>\n                \n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full text-sm flex items-center justify-center font-bold mt-0.5\">3</span>\n                  <p class=\"text-gray-700 dark:text-gray-300 text-sm\">\n                    <strong>Pega el mensaje</strong> que hemos copiado para ti\n                  </p>\n                </div>\n                \n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full text-sm flex items-center justify-center font-bold mt-0.5\">4</span>\n                  <p class=\"text-gray-700 dark:text-gray-300 text-sm\">\n                    <strong>Adjunta las im√°genes</strong> desde tu galer√≠a ({{ imageFilesCount }} imagen{{ imageFilesCount !== 1 ? 'es' : '' }})\n                  </p>\n                </div>\n                \n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full text-sm flex items-center justify-center font-bold mt-0.5\">5</span>\n                  <p class=\"text-gray-700 dark:text-gray-300 text-sm\">\n                    <strong>Env√≠a el mensaje</strong> y listo ‚úÖ\n                  </p>\n                </div>\n              </div>\n\n              <!-- Informaci√≥n adicional -->\n              <div class=\"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                <p class=\"text-yellow-700 dark:text-yellow-300 text-xs\">\n                  üí° <strong>Consejo:</strong> Mant√©n esta ventana abierta por si necesitas copiar el mensaje nuevamente.\n                </p>\n              </div>\n            </div>\n\n            <!-- Botones -->\n            <div class=\"flex gap-3 mt-6\">\n              <button \n                @click=\"showTelegramInstructions = false\"\n                class=\"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300\"\n              >\n                Cerrar\n              </button>\n              \n              <button \n                @click=\"copyMessageAgain\"\n                class=\"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-all duration-300 flex items-center justify-center\"\n              >\n                <span class=\"material-symbols-outlined mr-2 text-lg\">content_copy</span>\n                Copiar Nuevamente\n              </button>\n            </div>\n\n            <!-- Bot√≥n para abrir Telegram -->\n            <button \n              @click=\"openTelegram\"\n              class=\"w-full mt-3 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-300 flex items-center justify-center\"\n            >\n              <span class=\"material-symbols-outlined mr-2\">open_in_new</span>\n              Abrir Telegram\n            </button>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport AppHeader from '@/components/Header.vue'\n\nexport default {\n  name: 'CartView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      cartItems: [],\n      cartCount: 0,\n      showContactModal: false,\n      showTelegramInstructions: false,\n      customerInfo: {\n        name: '',\n        telegram: '',\n        email: ''\n      },\n      currentMessage: ''\n    }\n  },\n  computed: {\n    canSubmitQuote() {\n      return this.customerInfo.name.trim() !== '' && \n             this.customerInfo.telegram.trim() !== '' &&\n             this.cartItems.length > 0\n    },\n    totalFiles() {\n      return this.cartItems.length\n    },\n    hasImageFiles() {\n      return this.cartItems.some(item => this.isImageFile(item.file))\n    },\n    imageFilesCount() {\n      return this.cartItems.filter(item => this.isImageFile(item.file)).length\n    }\n  },\n  mounted() {\n    this.loadCart()\n  },\n  methods: {\n    // M√©todo seguro para verificar si es imagen\n    isImageFile(file) {\n      return file && file.type && file.type.includes('image')\n    },\n\n    loadCart() {\n      const savedCart = localStorage.getItem('pigmaprint_cart')\n      if (savedCart) {\n        try {\n          const cartData = JSON.parse(savedCart)\n          this.cartItems = cartData.map(item => {\n            if (item.fileData && !item.file) {\n              const file = this.dataURLtoFile(item.fileData, item.fileName)\n              return {\n                ...item,\n                file: file\n              }\n            }\n            return {\n              ...item,\n              file: item.file || null // Asegurar que file no sea undefined\n            }\n          })\n          this.cartCount = this.cartItems.length\n        } catch (error) {\n          console.error('Error loading cart:', error)\n          this.cartItems = []\n          this.cartCount = 0\n        }\n      }\n    },\n\n    dataURLtoFile(dataurl, filename) {\n      if (!dataurl) return null\n      try {\n        const arr = dataurl.split(',')\n        const mime = arr[0].match(/:(.*?);/)[1]\n        const bstr = atob(arr[1])\n        let n = bstr.length\n        const u8arr = new Uint8Array(n)\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n)\n        }\n        return new File([u8arr], filename, { type: mime })\n      } catch (error) {\n        console.error('Error converting dataURL to File:', error)\n        return null\n      }\n    },\n\n    getProductIcon(productType) {\n      const icons = {\n        camiseta: 'checkroom',\n        taza: 'coffee',\n        termo: 'water_bottle',\n        gorra: 'sports_baseball',\n        vaso: 'liquor',\n        hoodie: 'account_circle',\n        otros: 'category'\n      }\n      return icons[productType] || 'category'\n    },\n\n    getProductTypeLabel(productType) {\n      const labels = {\n        camiseta: 'Camiseta',\n        taza: 'Taza',\n        termo: 'Termo',\n        gorra: 'Gorra',\n        vaso: 'Vaso T√©rmico',\n        hoodie: 'Hoodie',\n        otros: 'Otro Producto'\n      }\n      return labels[productType] || 'Producto'\n    },\n    \n    formatDate(dateString) {\n      if (!dateString) return 'Fecha no disponible'\n      try {\n        const date = new Date(dateString)\n        return date.toLocaleDateString('es-ES', {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        })\n      } catch (error) {\n        return 'Fecha inv√°lida'\n      }\n    },\n\n    formatFileSize(bytes) {\n      if (!bytes) return 'N/A'\n      if (bytes === 0) return '0 Bytes'\n      const k = 1024\n      const sizes = ['Bytes', 'KB', 'MB', 'GB']\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    },\n\n    getFilePreview(file) {\n      if (!file) return ''\n      try {\n        return URL.createObjectURL(file)\n      } catch (error) {\n        return ''\n      }\n    },\n    \n    removeItem(itemId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId)\n      this.saveCart()\n      this.cartCount = this.cartItems.length\n    },\n    \n    clearCart() {\n      if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {\n        this.cartItems = []\n        this.saveCart()\n        this.cartCount = 0\n      }\n    },\n    \n    saveCart() {\n      try {\n        const cartToSave = this.cartItems.map(item => ({\n          id: item.id,\n          productType: item.productType,\n          productName: item.productName,\n          fileName: item.fileName,\n          notes: item.notes,\n          date: item.date,\n          fileData: item.file ? this.fileToDataURL(item.file) : null\n        }))\n        localStorage.setItem('pigmaprint_cart', JSON.stringify(cartToSave))\n      } catch (error) {\n        console.error('Error saving cart:', error)\n      }\n    },\n\n    async fileToDataURL(file) {\n      if (!file) return null\n      return new Promise((resolve) => {\n        const reader = new FileReader()\n        reader.onload = (e) => resolve(e.target.result)\n        reader.onerror = () => resolve(null)\n        reader.readAsDataURL(file)\n      })\n    },\n\n    // PREPARAR PARA TELEGRAM\n    async prepareForTelegram() {\n      if (!this.canSubmitQuote) {\n        alert('Por favor completa tu informaci√≥n de contacto')\n        return\n      }\n\n      try {\n        // Crear mensaje detallado\n        this.currentMessage = this.createDetailedMessage()\n        \n        // Copiar mensaje al portapapeles\n        await this.copyToClipboard(this.currentMessage)\n        \n        // Cerrar modal de contacto\n        this.showContactModal = false\n        \n        // Mostrar instrucciones para Telegram\n        setTimeout(() => {\n          this.showTelegramInstructions = true\n        }, 300)\n\n      } catch (error) {\n        console.error('Error preparando para Telegram:', error)\n        alert('Error al preparar el mensaje. Por favor intenta manualmente.')\n      }\n    },\n\n    // COPIAR AL PORTAPAPELES\n    async copyToClipboard(text) {\n      try {\n        await navigator.clipboard.writeText(text)\n        return true\n      } catch (error) {\n        // Fallback para navegadores antiguos\n        try {\n          const textArea = document.createElement('textarea')\n          textArea.value = text\n          document.body.appendChild(textArea)\n          textArea.select()\n          document.execCommand('copy')\n          document.body.removeChild(textArea)\n          return true\n        } catch (fallbackError) {\n          console.error('Error copying to clipboard:', fallbackError)\n          return false\n        }\n      }\n    },\n\n    // COPIAR MENSAJE NUEVAMENTE\n    async copyMessageAgain() {\n      const success = await this.copyToClipboard(this.currentMessage)\n      if (success) {\n        alert('‚úÖ Mensaje copiado nuevamente al portapapeles')\n      } else {\n        alert('‚ùå Error al copiar el mensaje. Por favor copia manualmente.')\n      }\n    },\n\n    // ABRIR TELEGRAM\n    openTelegram() {\n      window.open('https://t.me/Pigmaprint', '_blank', 'noopener,noreferrer')\n    },\n\n    // CREAR MENSAJE DETALLADO\n    createDetailedMessage() {\n      const currentDate = new Date().toLocaleDateString('es-ES', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      })\n\n      let message = `¬°Hola Pigmaprint! üé®\\n\\n`\n      message += `SOLICITUD DE COTIZACI√ìN - PEDIDO COMPLETO\\n\\n`\n\n      // Informaci√≥n del cliente\n      message += `üë§ INFORMACI√ìN DEL CLIENTE\\n`\n      message += `‚Ä¢ Nombre: ${this.customerInfo.name}\\n`\n      message += `‚Ä¢ Telegram: ${this.customerInfo.telegram}\\n`\n      if (this.customerInfo.email) {\n        message += `‚Ä¢ Email: ${this.customerInfo.email}\\n`\n      }\n      message += `‚Ä¢ Fecha: ${currentDate}\\n\\n`\n\n      // Resumen del pedido\n      message += `üì¶ RESUMEN DEL PEDIDO\\n`\n      message += `‚Ä¢ Total productos: ${this.cartItems.length}\\n`\n      message += `‚Ä¢ Archivos adjuntos: ${this.totalFiles}\\n`\n      message += `‚Ä¢ Im√°genes incluidas: ${this.imageFilesCount}\\n\\n`\n\n      // Detalles de productos\n      message += `üé® DETALLES DE PRODUCTOS\\n\\n`\n      \n      this.cartItems.forEach((item, index) => {\n        message += `${index + 1}. ${this.getProductTypeLabel(item.productType)}\\n`\n        message += `   üìÅ Archivo: ${item.fileName}\\n`\n        message += `   üìè Tama√±o: ${this.formatFileSize(item.file?.size)}\\n`\n        message += `   üè∑Ô∏è Producto: ${item.productName}\\n`\n        \n        if (item.notes && item.notes.trim() !== '') {\n          message += `   üí¨ Instrucciones: ${item.notes}\\n`\n        }\n        \n        if (this.isImageFile(item.file)) {\n          message += `   üñºÔ∏è Tipo: Imagen (adjuntada)\\n`\n        }\n        \n        message += `\\n`\n      })\n\n      message += `üí° INFORMACI√ìN ADICIONAL\\n`\n      message += `He adjuntado todas las im√°genes solicitadas. Por favor env√≠enme la cotizaci√≥n completa con precios y tiempos de entrega.\\n\\n`\n      message += `¬°Quedo atento(a) a su respuesta! üôè\\n\\n`\n      message += `---\\n`\n      message += `Mensaje generado desde Pigmaprint Web`\n\n      return message\n    }\n  }\n}\n</script>\n\n<style scoped>\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}