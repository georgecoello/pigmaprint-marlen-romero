{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-hex.js\";\nimport \"core-js/modules/esnext.uint8-array.to-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.to-hex.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport AppHeader from '@/components/Header.vue';\nexport default {\n  name: 'CartView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      cartItems: [],\n      cartCount: 0,\n      showContactModal: false,\n      sendingEmail: false,\n      customerInfo: {\n        name: '',\n        phone: '',\n        email: ''\n      },\n      // URL del backend - cambia si est√° en producci√≥n\n      backendUrl: 'http://localhost:3001'\n    };\n  },\n  computed: {\n    canSubmitOrder() {\n      return this.customerInfo.name.trim() !== '' && this.customerInfo.phone.trim() !== '' && this.cartItems.length > 0 && !this.sendingEmail;\n    },\n    totalFiles() {\n      return this.cartItems.length;\n    },\n    imageFilesCount() {\n      return this.cartItems.filter(item => this.isImageFile(item.file)).length;\n    }\n  },\n  mounted() {\n    this.loadCart();\n  },\n  methods: {\n    isImageFile(file) {\n      return file && file.type && file.type.includes('image');\n    },\n    loadCart() {\n      const savedCart = localStorage.getItem('pigmaprint_cart');\n      if (savedCart) {\n        try {\n          const cartData = JSON.parse(savedCart);\n          this.cartItems = cartData.map(item => {\n            if (item.fileData && !item.file) {\n              const file = this.dataURLtoFile(item.fileData, item.fileName);\n              return {\n                ...item,\n                file: file\n              };\n            }\n            return {\n              ...item,\n              file: item.file || null\n            };\n          });\n          this.cartCount = this.cartItems.length;\n        } catch (error) {\n          console.error('Error loading cart:', error);\n          this.cartItems = [];\n          this.cartCount = 0;\n        }\n      }\n    },\n    dataURLtoFile(dataurl, filename) {\n      if (!dataurl) return null;\n      try {\n        const arr = dataurl.split(',');\n        const mime = arr[0].match(/:(.*?);/)[1];\n        const bstr = atob(arr[1]);\n        let n = bstr.length;\n        const u8arr = new Uint8Array(n);\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new File([u8arr], filename, {\n          type: mime\n        });\n      } catch (error) {\n        console.error('Error converting dataURL to File:', error);\n        return null;\n      }\n    },\n    getProductIcon(productType) {\n      const icons = {\n        camiseta: 'checkroom',\n        taza: 'coffee',\n        termo: 'water_bottle',\n        gorra: 'sports_baseball',\n        vaso: 'liquor',\n        hoodie: 'account_circle',\n        otros: 'category'\n      };\n      return icons[productType] || 'category';\n    },\n    getProductTypeLabel(productType) {\n      const labels = {\n        camiseta: 'Camiseta',\n        taza: 'Taza',\n        termo: 'Termo',\n        gorra: 'Gorra',\n        vaso: 'Vaso T√©rmico',\n        hoodie: 'Hoodie',\n        otros: 'Otro Producto'\n      };\n      return labels[productType] || 'Producto';\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'Fecha no disponible';\n      try {\n        const date = new Date(dateString);\n        return date.toLocaleDateString('es-ES', {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        });\n      } catch (error) {\n        return 'Fecha inv√°lida';\n      }\n    },\n    formatFileSize(bytes) {\n      if (!bytes) return 'N/A';\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    getFilePreview(file) {\n      if (!file) return '';\n      try {\n        return URL.createObjectURL(file);\n      } catch (error) {\n        return '';\n      }\n    },\n    removeItem(itemId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId);\n      this.saveCart();\n      this.cartCount = this.cartItems.length;\n    },\n    clearCart() {\n      if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {\n        this.cartItems = [];\n        this.saveCart();\n        this.cartCount = 0;\n      }\n    },\n    saveCart() {\n      try {\n        const cartToSave = this.cartItems.map(item => ({\n          id: item.id,\n          productType: item.productType,\n          productName: item.productName,\n          fileName: item.fileName,\n          notes: item.notes,\n          date: item.date,\n          fileData: item.file ? this.fileToDataURL(item.file) : null\n        }));\n        localStorage.setItem('pigmaprint_cart', JSON.stringify(cartToSave));\n      } catch (error) {\n        console.error('Error saving cart:', error);\n      }\n    },\n    async fileToDataURL(file) {\n      if (!file) return null;\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = e => resolve(e.target.result);\n        reader.onerror = () => resolve(null);\n        reader.readAsDataURL(file);\n      });\n    },\n    // ENVIAR PEDIDO POR CORREO - CON BACKEND\n    async sendOrderByEmail() {\n      if (!this.canSubmitOrder) {\n        alert('Por favor completa tu informaci√≥n de contacto');\n        return;\n      }\n      this.sendingEmail = true;\n      try {\n        // Configuraci√≥n del correo\n        const emailData = {\n          customerName: this.customerInfo.name,\n          customerPhone: this.customerInfo.phone,\n          customerEmail: this.customerInfo.email || 'No proporcionado',\n          orderDetails: this.createOrderDetails(),\n          files: this.cartItems.map(item => item.file).filter(file => file !== null)\n        };\n        console.log('üì§ Enviando pedido al backend...', {\n          customer: emailData.customerName,\n          archivos: emailData.files.length\n        });\n\n        // Enviar al backend\n        const result = await this.sendToBackend(emailData);\n\n        // Limpiar carrito despu√©s del env√≠o exitoso\n        this.clearCart();\n        this.showContactModal = false;\n        alert('‚úÖ Pedido enviado exitosamente. Nos pondremos en contacto contigo pronto.');\n      } catch (error) {\n        console.error('‚ùå Error enviando pedido:', error);\n        alert('‚ùå Error al enviar el pedido: ' + error.message);\n      } finally {\n        this.sendingEmail = false;\n      }\n    },\n    // CREAR DETALLES DEL PEDIDO\n    createOrderDetails() {\n      const currentDate = new Date().toLocaleDateString('es-ES', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n      let details = `NUEVO PEDIDO - PIGMAPRINT\\n`;\n      details += `Fecha: ${currentDate}\\n\\n`;\n\n      // Informaci√≥n del cliente\n      details += `üë§ INFORMACI√ìN DEL CLIENTE\\n`;\n      details += `‚Ä¢ Nombre: ${this.customerInfo.name}\\n`;\n      details += `‚Ä¢ Tel√©fono: ${this.customerInfo.phone}\\n`;\n      details += `‚Ä¢ Email: ${this.customerInfo.email || 'No proporcionado'}\\n\\n`;\n\n      // Resumen del pedido\n      details += `üì¶ RESUMEN DEL PEDIDO\\n`;\n      details += `‚Ä¢ Total de productos: ${this.cartItems.length}\\n`;\n      details += `‚Ä¢ Archivos adjuntos: ${this.cartItems.length}\\n`;\n      details += `‚Ä¢ Im√°genes: ${this.imageFilesCount}\\n\\n`;\n\n      // Detalles de productos\n      details += `üé® DETALLES DE PRODUCTOS\\n\\n`;\n      this.cartItems.forEach((item, index) => {\n        details += `PRODUCTO ${index + 1}:\\n`;\n        details += `‚Ä¢ Tipo: ${this.getProductTypeLabel(item.productType)}\\n`;\n        details += `‚Ä¢ Nombre: ${item.productName}\\n`;\n        details += `‚Ä¢ Archivo: ${item.fileName}\\n`;\n        details += `‚Ä¢ Tama√±o: ${this.formatFileSize(item.file?.size)}\\n`;\n        if (item.notes && item.notes.trim() !== '') {\n          details += `‚Ä¢ Notas: ${item.notes}\\n`;\n        }\n        details += `‚Ä¢ Fecha de solicitud: ${this.formatDate(item.date)}\\n\\n`;\n      });\n      details += `---\\n`;\n      details += `Este pedido fue generado autom√°ticamente desde la web de Pigmaprint\\n`;\n      return details;\n    },\n    // ENVIAR AL BACKEND\n    async sendToBackend(emailData) {\n      try {\n        const formData = new FormData();\n\n        // Agregar datos del formulario\n        formData.append('customerName', emailData.customerName);\n        formData.append('customerPhone', emailData.customerPhone);\n        formData.append('customerEmail', emailData.customerEmail);\n        formData.append('orderDetails', emailData.orderDetails);\n\n        // Agregar archivos\n        emailData.files.forEach(file => {\n          formData.append('files', file);\n        });\n        console.log('üìé Archivos a enviar:', emailData.files.map(f => f.name));\n\n        // Enviar al backend\n        const response = await fetch(`${this.backendUrl}/api/send-order`, {\n          method: 'POST',\n          body: formData\n        });\n        const result = await response.json();\n        if (!response.ok || !result.success) {\n          throw new Error(result.message || 'Error en el servidor');\n        }\n        console.log('‚úÖ Respuesta del backend:', result);\n        return result;\n      } catch (error) {\n        console.error('‚ùå Error en comunicaci√≥n con backend:', error);\n\n        // Fallback si el backend no est√° disponible\n        this.showBackendFallbackInstructions(emailData);\n        throw new Error('No se pudo conectar con el servidor. Por favor intenta m√°s tarde.');\n      }\n    },\n    // INSTRUCCIONES SI FALLA EL BACKEND\n    showBackendFallbackInstructions(emailData) {\n      const fileList = this.cartItems.map((item, index) => `${index + 1}. ${item.fileName} (${this.formatFileSize(item.file?.size)})`).join('\\n');\n      const manualMessage = `\nüì¶ PEDIDO PIGMAPRINT - ENV√çO MANUAL\n\nFECHA: ${new Date().toLocaleString('es-ES')}\n\nüë§ CLIENTE:\n‚Ä¢ Nombre: ${emailData.customerName}\n‚Ä¢ Tel√©fono: ${emailData.customerPhone}\n‚Ä¢ Email: ${emailData.customerEmail}\n\nüì¶ RESUMEN:\n‚Ä¢ Productos: ${this.cartItems.length}\n‚Ä¢ Archivos: ${this.cartItems.length}\n‚Ä¢ Im√°genes: ${this.imageFilesCount}\n\nüé® DETALLES:\n${emailData.orderDetails}\n\nüìé ARCHIVOS A ADJUNTAR:\n${fileList}\n\nüìã INSTRUCCIONES:\n1. Copia esta informaci√≥n\n2. Abre tu correo electr√≥nico\n3. Pega esta informaci√≥n en el cuerpo del mensaje\n4. Adjunta los ${this.cartItems.length} archivos manualmente\n5. Env√≠a a: pigmaprint@gmail.com\n6. Asunto: Nuevo Pedido - ${emailData.customerName}\n      `.trim();\n\n      // Copiar al portapapeles\n      this.copyToClipboard(manualMessage);\n      alert(`üìß ENV√çO MANUAL REQUERIDO\n\nEl servidor no est√° disponible, pero hemos copiado toda la informaci√≥n.\n\n‚úÖ INFORMACI√ìN COPIADA AL PORTAPAPELES\n\nüìã POR FAVOR:\n1. Abre tu correo manualmente\n2. Pega la informaci√≥n copiada\n3. Adjunta los ${this.cartItems.length} archivos\n4. Env√≠a a: pigmaprint@gmail.com\n\n¬°Gracias!`);\n    },\n    // M√âTODO PARA COPIAR AL PORTAPAPELES\n    async copyToClipboard(text) {\n      try {\n        await navigator.clipboard.writeText(text);\n        return true;\n      } catch (error) {\n        // Fallback para navegadores antiguos\n        try {\n          const textArea = document.createElement('textarea');\n          textArea.value = text;\n          document.body.appendChild(textArea);\n          textArea.select();\n          document.execCommand('copy');\n          document.body.removeChild(textArea);\n          return true;\n        } catch (fallbackError) {\n          console.error('Error copying to clipboard:', fallbackError);\n          return false;\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["AppHeader","name","components","data","cartItems","cartCount","showContactModal","sendingEmail","customerInfo","phone","email","backendUrl","computed","canSubmitOrder","trim","length","totalFiles","imageFilesCount","filter","item","isImageFile","file","mounted","loadCart","methods","type","includes","savedCart","localStorage","getItem","cartData","JSON","parse","map","fileData","dataURLtoFile","fileName","error","console","dataurl","filename","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","getProductIcon","productType","icons","camiseta","taza","termo","gorra","vaso","hoodie","otros","getProductTypeLabel","labels","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","getFilePreview","URL","createObjectURL","removeItem","itemId","id","saveCart","clearCart","confirm","cartToSave","productName","notes","fileToDataURL","setItem","stringify","Promise","resolve","reader","FileReader","onload","e","target","result","onerror","readAsDataURL","sendOrderByEmail","alert","emailData","customerName","customerPhone","customerEmail","orderDetails","createOrderDetails","files","customer","archivos","sendToBackend","message","currentDate","weekday","hour","minute","details","forEach","index","size","formData","FormData","append","f","response","fetch","method","body","json","ok","success","Error","showBackendFallbackInstructions","fileList","join","manualMessage","toLocaleString","copyToClipboard","text","navigator","clipboard","writeText","textArea","document","createElement","value","appendChild","select","execCommand","removeChild","fallbackError"],"sources":["/home/jorge/Escritorio/Jorge-PC/Marlen/pigmaprint-marlen-romero/frontend/src/views/Cart.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\n    <AppHeader :cart-count=\"cartCount\" />\n    \n    <main class=\"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div class=\"max-w-6xl mx-auto\">\n        <!-- Header del Carrito -->\n        <div class=\"text-center mb-12\">\n          <h1 class=\"text-4xl sm:text-5xl font-extrabold tracking-tight bg-gradient-to-r from-purple-600 to-blue-500 bg-clip-text text-transparent\">\n            Tu Carrito\n          </h1>\n          <p class=\"mt-4 text-lg text-gray-600 dark:text-gray-300\">\n            Revisa y gestiona tus productos personalizados\n          </p>\n        </div>\n\n        <!-- Carrito Vac√≠o -->\n        <div v-if=\"cartItems.length === 0\" class=\"text-center bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12\">\n          <div class=\"text-6xl text-purple-400 mb-6\">\n            <span class=\"material-symbols-outlined\">shopping_cart</span>\n          </div>\n          <h3 class=\"text-2xl font-bold text-gray-800 dark:text-white mb-4\">\n            Tu carrito est√° vac√≠o\n          </h3>\n          <p class=\"text-gray-600 dark:text-gray-300 mb-8 max-w-md mx-auto\">\n            Agrega algunos productos personalizados para comenzar tu pedido.\n          </p>\n          <button \n            @click=\"$router.push('/')\"\n            class=\"px-8 py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:from-purple-600 hover:to-blue-600 transition-all duration-300 transform hover:-translate-y-0.5\"\n          >\n            <span class=\"material-symbols-outlined align-middle mr-2\">add_circle</span>\n            Agregar Productos\n          </button>\n        </div>\n\n        <!-- Carrito con Productos -->\n        <div v-else class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <!-- Lista de Productos -->\n          <div class=\"lg:col-span-2 space-y-6\">\n            <!-- Productos -->\n            <div \n              v-for=\"item in cartItems\" \n              :key=\"item.id\"\n              class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl\"\n            >\n              <div class=\"flex flex-col sm:flex-row gap-6\">\n                <!-- Vista previa de la imagen -->\n                <div class=\"flex-shrink-0 w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center overflow-hidden\">\n                  <img \n                    v-if=\"isImageFile(item.file)\"\n                    :src=\"getFilePreview(item.file)\"\n                    :alt=\"item.productName\"\n                    class=\"w-full h-full object-cover\"\n                  >\n                  <span v-else class=\"material-symbols-outlined text-3xl text-purple-600 dark:text-purple-400\">\n                    {{ getProductIcon(item.productType) }}\n                  </span>\n                </div>\n\n                <!-- Informaci√≥n del Producto -->\n                <div class=\"flex-grow\">\n                  <div class=\"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4\">\n                    <div>\n                      <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-2\">\n                        {{ item.productName }}\n                      </h3>\n                      <p class=\"text-gray-600 dark:text-gray-300 text-sm\">\n                        Archivo: {{ item.fileName }}\n                      </p>\n                      <p v-if=\"item.notes\" class=\"text-gray-500 dark:text-gray-400 text-sm mt-2\">\n                        Notas: {{ item.notes }}\n                      </p>\n                      <p class=\"text-gray-600 dark:text-gray-300 text-sm mt-1\">\n                        Tipo: {{ getProductTypeLabel(item.productType) }}\n                      </p>\n                    </div>\n                    \n                    <!-- Precio (placeholder) -->\n                    <div class=\"mt-2 sm:mt-0 text-right\">\n                      <p class=\"text-lg font-bold text-purple-600 dark:text-purple-400\">\n                        Por cotizar\n                      </p>\n                      <p class=\"text-sm text-gray-500 dark:text-gray-400\">\n                        {{ formatDate(item.date) }}\n                      </p>\n                    </div>\n                  </div>\n\n                  <!-- Acciones -->\n                  <div class=\"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <span class=\"text-sm text-gray-500 dark:text-gray-400\">\n                      Tama√±o archivo: {{ formatFileSize(item.file?.size) }}\n                    </span>\n                    \n                    <button \n                      @click=\"removeItem(item.id)\"\n                      class=\"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200 flex items-center\"\n                    >\n                      <span class=\"material-symbols-outlined text-lg mr-1\">delete</span>\n                      Eliminar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Resumen del Pedido -->\n          <div class=\"lg:col-span-1\">\n            <div class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 sticky top-6\">\n              <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-6\">\n                Resumen del Pedido\n              </h3>\n\n              <!-- Detalles -->\n              <div class=\"space-y-4 mb-6\">\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Productos:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ cartItems.length }}\n                  </span>\n                </div>\n                \n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Archivos:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ totalFiles }}\n                  </span>\n                </div>\n\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Im√°genes:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ imageFilesCount }}\n                  </span>\n                </div>\n\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Estado:</span>\n                  <span class=\"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-full text-sm font-medium\">\n                    Por cotizar\n                  </span>\n                </div>\n              </div>\n\n              <!-- Total -->\n              <div class=\"border-t border-gray-200 dark:border-gray-700 pt-4 mb-6\">\n                <div class=\"flex justify-between items-center text-lg font-bold\">\n                  <span class=\"text-gray-800 dark:text-white\">Total estimado:</span>\n                  <span class=\"text-purple-600 dark:text-purple-400\">\n                    Por cotizar\n                  </span>\n                </div>\n                <p class=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">\n                  * Los precios finales ser√°n confirmados por nuestro equipo\n                </p>\n              </div>\n\n              <!-- Botones de Acci√≥n -->\n              <div class=\"space-y-4\">\n                <button \n                  @click=\"showContactModal = true\"\n                  :disabled=\"cartItems.length === 0 || sendingEmail\"\n                  :class=\"[\n                    'w-full px-6 py-4 rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 flex items-center justify-center',\n                    cartItems.length > 0 && !sendingEmail\n                      ? 'bg-gradient-to-r from-green-500 to-blue-600 text-white hover:shadow-xl hover:from-green-600 hover:to-blue-700'\n                      : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                  ]\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\" v-if=\"!sendingEmail\">email</span>\n                  <span class=\"material-symbols-outlined mr-2 animate-spin\" v-else>progress_activity</span>\n                  {{ sendingEmail ? 'Enviando...' : 'Enviar Pedido por Correo' }}\n                </button>\n                \n                <button \n                  @click=\"$router.push('/')\"\n                  :disabled=\"sendingEmail\"\n                  class=\"w-full px-6 py-4 border-2 border-purple-500 text-purple-600 dark:text-purple-400 dark:border-purple-400 rounded-xl font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-300 flex items-center justify-center\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">add_circle</span>\n                  Agregar M√°s Productos\n                </button>\n                \n                <button \n                  @click=\"clearCart\"\n                  :disabled=\"sendingEmail\"\n                  class=\"w-full px-6 py-4 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200 flex items-center justify-center\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">delete_sweep</span>\n                  Vaciar Carrito\n                </button>\n              </div>\n\n              <!-- Informaci√≥n Adicional -->\n              <div class=\"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800\">\n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"material-symbols-outlined text-green-500 text-lg mt-0.5\">info</span>\n                  <div>\n                    <p class=\"text-sm text-green-700 dark:text-green-300\">\n                      El pedido se enviar√° autom√°ticamente por correo con todos los archivos adjuntos.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n\n    <!-- Modal de Informaci√≥n del Cliente -->\n    <transition name=\"modal-fade\">\n      <div \n        v-if=\"showContactModal\" \n        class=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-all duration-300\"\n        @click.self=\"showContactModal = false\"\n      >\n        <div class=\"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-sm w-full mx-auto transform transition-all duration-500 scale-95 hover:scale-100\">\n          <!-- Header -->\n          <div class=\"bg-gradient-to-r from-green-500 to-blue-600 rounded-t-2xl p-6 text-center\">\n            <div class=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3 backdrop-blur-sm\">\n              <span class=\"material-symbols-outlined text-3xl text-white\">\n                person\n              </span>\n            </div>\n            <h3 class=\"text-xl font-bold text-white mb-1\">\n              Informaci√≥n del Cliente\n            </h3>\n          </div>\n\n          <!-- Formulario -->\n          <div class=\"p-5\">\n            <div class=\"space-y-3\">\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Nombre Completo *\n                </label>\n                <input \n                  v-model=\"customerInfo.name\"\n                  type=\"text\"\n                  :disabled=\"sendingEmail\"\n                  class=\"w-full rounded-lg p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed\"\n                  placeholder=\"Ej: Mar√≠a Gonz√°lez\"\n                  required\n                >\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  N√∫mero de Tel√©fono *\n                </label>\n                <input \n                  v-model=\"customerInfo.phone\"\n                  type=\"tel\"\n                  :disabled=\"sendingEmail\"\n                  class=\"w-full rounded-lg p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed\"\n                  placeholder=\"Ej: +34 612 345 678\"\n                  required\n                >\n              </div>\n\n              <div>\n                <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Correo Electr√≥nico (opcional)\n                </label>\n                <input \n                  v-model=\"customerInfo.email\"\n                  type=\"email\"\n                  :disabled=\"sendingEmail\"\n                  class=\"w-full rounded-lg p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed\"\n                  placeholder=\"Ej: cliente@email.com\"\n                >\n              </div>\n            </div>\n\n            <!-- Botones -->\n            <div class=\"flex gap-2 mt-4\">\n              <button \n                @click=\"showContactModal = false\"\n                :disabled=\"sendingEmail\"\n                class=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Cancelar\n              </button>\n              \n              <button \n                @click=\"sendOrderByEmail\"\n                :disabled=\"!canSubmitOrder\"\n                :class=\"[\n                  'flex-1 px-3 py-2 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-0.5 flex items-center justify-center text-sm',\n                  canSubmitOrder && !sendingEmail\n                    ? 'bg-gradient-to-r from-green-500 to-blue-600 text-white shadow-lg hover:shadow-xl'\n                    : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                ]\"\n              >\n                <span class=\"material-symbols-outlined mr-1 text-base\" v-if=\"!sendingEmail\">send</span>\n                <span class=\"material-symbols-outlined mr-1 text-base animate-spin\" v-else>progress_activity</span>\n                {{ sendingEmail ? 'Enviando...' : 'Enviar Pedido' }}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport AppHeader from '@/components/Header.vue'\n\nexport default {\n  name: 'CartView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      cartItems: [],\n      cartCount: 0,\n      showContactModal: false,\n      sendingEmail: false,\n      customerInfo: {\n        name: '',\n        phone: '',\n        email: ''\n      },\n      // URL del backend - cambia si est√° en producci√≥n\n      backendUrl: 'http://localhost:3001'\n    }\n  },\n  computed: {\n    canSubmitOrder() {\n      return this.customerInfo.name.trim() !== '' && \n             this.customerInfo.phone.trim() !== '' &&\n             this.cartItems.length > 0 &&\n             !this.sendingEmail\n    },\n    totalFiles() {\n      return this.cartItems.length\n    },\n    imageFilesCount() {\n      return this.cartItems.filter(item => this.isImageFile(item.file)).length\n    }\n  },\n  mounted() {\n    this.loadCart()\n  },\n  methods: {\n    isImageFile(file) {\n      return file && file.type && file.type.includes('image')\n    },\n\n    loadCart() {\n      const savedCart = localStorage.getItem('pigmaprint_cart')\n      if (savedCart) {\n        try {\n          const cartData = JSON.parse(savedCart)\n          this.cartItems = cartData.map(item => {\n            if (item.fileData && !item.file) {\n              const file = this.dataURLtoFile(item.fileData, item.fileName)\n              return {\n                ...item,\n                file: file\n              }\n            }\n            return {\n              ...item,\n              file: item.file || null\n            }\n          })\n          this.cartCount = this.cartItems.length\n        } catch (error) {\n          console.error('Error loading cart:', error)\n          this.cartItems = []\n          this.cartCount = 0\n        }\n      }\n    },\n\n    dataURLtoFile(dataurl, filename) {\n      if (!dataurl) return null\n      try {\n        const arr = dataurl.split(',')\n        const mime = arr[0].match(/:(.*?);/)[1]\n        const bstr = atob(arr[1])\n        let n = bstr.length\n        const u8arr = new Uint8Array(n)\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n)\n        }\n        return new File([u8arr], filename, { type: mime })\n      } catch (error) {\n        console.error('Error converting dataURL to File:', error)\n        return null\n      }\n    },\n\n    getProductIcon(productType) {\n      const icons = {\n        camiseta: 'checkroom',\n        taza: 'coffee',\n        termo: 'water_bottle',\n        gorra: 'sports_baseball',\n        vaso: 'liquor',\n        hoodie: 'account_circle',\n        otros: 'category'\n      }\n      return icons[productType] || 'category'\n    },\n\n    getProductTypeLabel(productType) {\n      const labels = {\n        camiseta: 'Camiseta',\n        taza: 'Taza',\n        termo: 'Termo',\n        gorra: 'Gorra',\n        vaso: 'Vaso T√©rmico',\n        hoodie: 'Hoodie',\n        otros: 'Otro Producto'\n      }\n      return labels[productType] || 'Producto'\n    },\n    \n    formatDate(dateString) {\n      if (!dateString) return 'Fecha no disponible'\n      try {\n        const date = new Date(dateString)\n        return date.toLocaleDateString('es-ES', {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        })\n      } catch (error) {\n        return 'Fecha inv√°lida'\n      }\n    },\n\n    formatFileSize(bytes) {\n      if (!bytes) return 'N/A'\n      if (bytes === 0) return '0 Bytes'\n      const k = 1024\n      const sizes = ['Bytes', 'KB', 'MB', 'GB']\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    },\n\n    getFilePreview(file) {\n      if (!file) return ''\n      try {\n        return URL.createObjectURL(file)\n      } catch (error) {\n        return ''\n      }\n    },\n    \n    removeItem(itemId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId)\n      this.saveCart()\n      this.cartCount = this.cartItems.length\n    },\n    \n    clearCart() {\n      if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {\n        this.cartItems = []\n        this.saveCart()\n        this.cartCount = 0\n      }\n    },\n    \n    saveCart() {\n      try {\n        const cartToSave = this.cartItems.map(item => ({\n          id: item.id,\n          productType: item.productType,\n          productName: item.productName,\n          fileName: item.fileName,\n          notes: item.notes,\n          date: item.date,\n          fileData: item.file ? this.fileToDataURL(item.file) : null\n        }))\n        localStorage.setItem('pigmaprint_cart', JSON.stringify(cartToSave))\n      } catch (error) {\n        console.error('Error saving cart:', error)\n      }\n    },\n\n    async fileToDataURL(file) {\n      if (!file) return null\n      return new Promise((resolve) => {\n        const reader = new FileReader()\n        reader.onload = (e) => resolve(e.target.result)\n        reader.onerror = () => resolve(null)\n        reader.readAsDataURL(file)\n      })\n    },\n\n    // ENVIAR PEDIDO POR CORREO - CON BACKEND\n    async sendOrderByEmail() {\n      if (!this.canSubmitOrder) {\n        alert('Por favor completa tu informaci√≥n de contacto')\n        return\n      }\n\n      this.sendingEmail = true\n\n      try {\n        // Configuraci√≥n del correo\n        const emailData = {\n          customerName: this.customerInfo.name,\n          customerPhone: this.customerInfo.phone,\n          customerEmail: this.customerInfo.email || 'No proporcionado',\n          orderDetails: this.createOrderDetails(),\n          files: this.cartItems.map(item => item.file).filter(file => file !== null)\n        }\n\n        console.log('üì§ Enviando pedido al backend...', {\n          customer: emailData.customerName,\n          archivos: emailData.files.length\n        })\n\n        // Enviar al backend\n        const result = await this.sendToBackend(emailData)\n        \n        // Limpiar carrito despu√©s del env√≠o exitoso\n        this.clearCart()\n        this.showContactModal = false\n        \n        alert('‚úÖ Pedido enviado exitosamente. Nos pondremos en contacto contigo pronto.')\n        \n      } catch (error) {\n        console.error('‚ùå Error enviando pedido:', error)\n        alert('‚ùå Error al enviar el pedido: ' + error.message)\n      } finally {\n        this.sendingEmail = false\n      }\n    },\n\n    // CREAR DETALLES DEL PEDIDO\n    createOrderDetails() {\n      const currentDate = new Date().toLocaleDateString('es-ES', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n\n      let details = `NUEVO PEDIDO - PIGMAPRINT\\n`\n      details += `Fecha: ${currentDate}\\n\\n`\n\n      // Informaci√≥n del cliente\n      details += `üë§ INFORMACI√ìN DEL CLIENTE\\n`\n      details += `‚Ä¢ Nombre: ${this.customerInfo.name}\\n`\n      details += `‚Ä¢ Tel√©fono: ${this.customerInfo.phone}\\n`\n      details += `‚Ä¢ Email: ${this.customerInfo.email || 'No proporcionado'}\\n\\n`\n\n      // Resumen del pedido\n      details += `üì¶ RESUMEN DEL PEDIDO\\n`\n      details += `‚Ä¢ Total de productos: ${this.cartItems.length}\\n`\n      details += `‚Ä¢ Archivos adjuntos: ${this.cartItems.length}\\n`\n      details += `‚Ä¢ Im√°genes: ${this.imageFilesCount}\\n\\n`\n\n      // Detalles de productos\n      details += `üé® DETALLES DE PRODUCTOS\\n\\n`\n      \n      this.cartItems.forEach((item, index) => {\n        details += `PRODUCTO ${index + 1}:\\n`\n        details += `‚Ä¢ Tipo: ${this.getProductTypeLabel(item.productType)}\\n`\n        details += `‚Ä¢ Nombre: ${item.productName}\\n`\n        details += `‚Ä¢ Archivo: ${item.fileName}\\n`\n        details += `‚Ä¢ Tama√±o: ${this.formatFileSize(item.file?.size)}\\n`\n        \n        if (item.notes && item.notes.trim() !== '') {\n          details += `‚Ä¢ Notas: ${item.notes}\\n`\n        }\n        \n        details += `‚Ä¢ Fecha de solicitud: ${this.formatDate(item.date)}\\n\\n`\n      })\n\n      details += `---\\n`\n      details += `Este pedido fue generado autom√°ticamente desde la web de Pigmaprint\\n`\n\n      return details\n    },\n\n    // ENVIAR AL BACKEND\n    async sendToBackend(emailData) {\n      try {\n        const formData = new FormData();\n        \n        // Agregar datos del formulario\n        formData.append('customerName', emailData.customerName);\n        formData.append('customerPhone', emailData.customerPhone);\n        formData.append('customerEmail', emailData.customerEmail);\n        formData.append('orderDetails', emailData.orderDetails);\n        \n        // Agregar archivos\n        emailData.files.forEach((file) => {\n          formData.append('files', file);\n        });\n\n        console.log('üìé Archivos a enviar:', emailData.files.map(f => f.name));\n\n        // Enviar al backend\n        const response = await fetch(`${this.backendUrl}/api/send-order`, {\n          method: 'POST',\n          body: formData\n        });\n\n        const result = await response.json();\n\n        if (!response.ok || !result.success) {\n          throw new Error(result.message || 'Error en el servidor');\n        }\n\n        console.log('‚úÖ Respuesta del backend:', result);\n        return result;\n\n      } catch (error) {\n        console.error('‚ùå Error en comunicaci√≥n con backend:', error);\n        \n        // Fallback si el backend no est√° disponible\n        this.showBackendFallbackInstructions(emailData);\n        throw new Error('No se pudo conectar con el servidor. Por favor intenta m√°s tarde.');\n      }\n    },\n\n    // INSTRUCCIONES SI FALLA EL BACKEND\n    showBackendFallbackInstructions(emailData) {\n      const fileList = this.cartItems.map((item, index) => \n        `${index + 1}. ${item.fileName} (${this.formatFileSize(item.file?.size)})`\n      ).join('\\n');\n\n      const manualMessage = `\nüì¶ PEDIDO PIGMAPRINT - ENV√çO MANUAL\n\nFECHA: ${new Date().toLocaleString('es-ES')}\n\nüë§ CLIENTE:\n‚Ä¢ Nombre: ${emailData.customerName}\n‚Ä¢ Tel√©fono: ${emailData.customerPhone}\n‚Ä¢ Email: ${emailData.customerEmail}\n\nüì¶ RESUMEN:\n‚Ä¢ Productos: ${this.cartItems.length}\n‚Ä¢ Archivos: ${this.cartItems.length}\n‚Ä¢ Im√°genes: ${this.imageFilesCount}\n\nüé® DETALLES:\n${emailData.orderDetails}\n\nüìé ARCHIVOS A ADJUNTAR:\n${fileList}\n\nüìã INSTRUCCIONES:\n1. Copia esta informaci√≥n\n2. Abre tu correo electr√≥nico\n3. Pega esta informaci√≥n en el cuerpo del mensaje\n4. Adjunta los ${this.cartItems.length} archivos manualmente\n5. Env√≠a a: pigmaprint@gmail.com\n6. Asunto: Nuevo Pedido - ${emailData.customerName}\n      `.trim();\n\n      // Copiar al portapapeles\n      this.copyToClipboard(manualMessage);\n      \n      alert(`üìß ENV√çO MANUAL REQUERIDO\n\nEl servidor no est√° disponible, pero hemos copiado toda la informaci√≥n.\n\n‚úÖ INFORMACI√ìN COPIADA AL PORTAPAPELES\n\nüìã POR FAVOR:\n1. Abre tu correo manualmente\n2. Pega la informaci√≥n copiada\n3. Adjunta los ${this.cartItems.length} archivos\n4. Env√≠a a: pigmaprint@gmail.com\n\n¬°Gracias!`);\n    },\n\n    // M√âTODO PARA COPIAR AL PORTAPAPELES\n    async copyToClipboard(text) {\n      try {\n        await navigator.clipboard.writeText(text);\n        return true;\n      } catch (error) {\n        // Fallback para navegadores antiguos\n        try {\n          const textArea = document.createElement('textarea');\n          textArea.value = text;\n          document.body.appendChild(textArea);\n          textArea.select();\n          document.execCommand('copy');\n          document.body.removeChild(textArea);\n          return true;\n        } catch (fallbackError) {\n          console.error('Error copying to clipboard:', fallbackError);\n          return false;\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}