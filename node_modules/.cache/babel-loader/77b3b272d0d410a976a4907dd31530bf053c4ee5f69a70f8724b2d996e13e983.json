{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport AppHeader from '@/components/Header.vue';\nexport default {\n  name: 'CartView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      cartItems: [],\n      cartCount: 0,\n      customerInfo: {\n        name: '',\n        phone: '',\n        email: ''\n      },\n      showWhatsAppModal: false,\n      // CAMBIA ESTE N√öMERO POR EL N√öMERO DE PIGMAPRINT\n      pigmaprintWhatsApp: '50495737387' // Sin el s√≠mbolo +\n    };\n  },\n  computed: {\n    canSubmitQuote() {\n      return this.cartItems.length > 0 && this.customerInfo.name.trim() !== '' && this.customerInfo.phone.trim() !== '';\n    }\n  },\n  mounted() {\n    this.loadCart();\n  },\n  methods: {\n    loadCart() {\n      const savedCart = localStorage.getItem('pigmaprint_cart');\n      if (savedCart) {\n        this.cartItems = JSON.parse(savedCart);\n        this.cartCount = this.cartItems.length;\n      }\n    },\n    getProductIcon(productType) {\n      const icons = {\n        camiseta: 'checkroom',\n        taza: 'coffee',\n        termo: 'water_bottle',\n        gorra: 'sports_baseball',\n        vaso: 'liquor',\n        hoodie: 'account_circle',\n        otros: 'category'\n      };\n      return icons[productType] || 'category';\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString('es-ES', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    formatPhoneForDisplay(phone) {\n      // Formatear para mostrar: +504 1234 5678\n      if (!phone) return '';\n      const cleaned = phone.replace(/\\D/g, '');\n      if (cleaned.length === 8) {\n        return `+504 ${cleaned.substring(0, 4)} ${cleaned.substring(4)}`;\n      }\n      return `+${cleaned}`;\n    },\n    formatPhoneForWhatsApp(phone) {\n      // Formatear para WhatsApp: 50412345678\n      if (!phone) return '';\n      const cleaned = phone.replace(/\\D/g, '');\n      // Si el n√∫mero empieza con 504, dejarlo como est√°\n      if (cleaned.startsWith('504')) {\n        return cleaned;\n      }\n      // Si es un n√∫mero local (8 d√≠gitos), agregar c√≥digo de pa√≠s\n      if (cleaned.length === 8) {\n        return '504' + cleaned;\n      }\n      return cleaned;\n    },\n    removeItem(itemId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId);\n      this.saveCart();\n      this.cartCount = this.cartItems.length;\n    },\n    clearCart() {\n      if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {\n        this.cartItems = [];\n        this.saveCart();\n        this.cartCount = 0;\n      }\n    },\n    saveCart() {\n      localStorage.setItem('pigmaprint_cart', JSON.stringify(this.cartItems));\n    },\n    proceedToCheckout() {\n      if (!this.canSubmitQuote) {\n        alert('Por favor completa tu informaci√≥n de contacto (nombre y WhatsApp)');\n        return;\n      }\n\n      // Validar formato del tel√©fono\n      const formattedPhone = this.formatPhoneForWhatsApp(this.customerInfo.phone);\n      if (formattedPhone.length < 8) {\n        alert('Por favor ingresa un n√∫mero de WhatsApp v√°lido');\n        return;\n      }\n\n      // Mostrar modal de confirmaci√≥n\n      this.showWhatsAppModal = true;\n    },\n    closeWhatsAppModal() {\n      this.showWhatsAppModal = false;\n    },\n    openWhatsApp() {\n      const orderData = {\n        items: this.cartItems,\n        customerInfo: this.customerInfo,\n        totalItems: this.cartItems.length,\n        orderDate: new Date().toISOString(),\n        orderReference: 'PM-' + Date.now().toString().slice(-8)\n      };\n      this.sendWhatsAppMessage(orderData);\n      this.closeWhatsAppModal();\n    },\n    sendWhatsAppMessage(orderData) {\n      try {\n        // Formatear el n√∫mero correctamente\n        const formattedNumber = this.formatPhoneForWhatsApp(this.pigmaprintWhatsApp);\n        if (!formattedNumber) {\n          alert('Error: N√∫mero de WhatsApp no configurado correctamente');\n          return;\n        }\n        console.log('N√∫mero formateado para WhatsApp:', formattedNumber);\n\n        // Construir el mensaje\n        let message = `¬°Hola Pigmaprint! üëã%0A%0A`;\n        message += `Solicito cotizaci√≥n para los siguientes productos:%0A%0A`;\n        message += `*üìã Informaci√≥n del Cliente:*%0A`;\n        message += `üë§ Nombre: ${orderData.customerInfo.name}%0A`;\n        message += `üìû WhatsApp: ${this.formatPhoneForDisplay(orderData.customerInfo.phone)}%0A`;\n        if (orderData.customerInfo.email) {\n          message += `üìß Email: ${orderData.customerInfo.email}%0A`;\n        }\n        message += `%0A*üì¶ Detalles del Pedido:*%0A`;\n        message += `üîñ Referencia: ${orderData.orderReference}%0A`;\n        message += `üìÖ Fecha: ${this.formatDate(orderData.orderDate)}%0A`;\n        message += `üõí Total productos: ${orderData.totalItems}%0A%0A`;\n        message += `*üé® Productos Solicitados:*%0A%0A`;\n        orderData.items.forEach((item, index) => {\n          message += `*${index + 1}. ${item.productName}*%0A`;\n          message += `üìé Archivo: ${item.fileName}%0A`;\n          if (item.notes) {\n            message += `üìù Notas: ${item.notes}%0A`;\n          }\n          message += `üîñ Ref: ${item.reference}%0A%0A`;\n        });\n        message += `*üí¨ Informaci√≥n Adicional:*%0A`;\n        message += `Por favor env√≠enme la cotizaci√≥n para estos productos. ¬°Gracias! üôè%0A%0A`;\n        message += `_Generado desde pigmaprint.com_`;\n\n        // Crear la URL de WhatsApp\n        const whatsappURL = `https://wa.me/${formattedNumber}?text=${message}`;\n        console.log('URL completa de WhatsApp:', whatsappURL);\n\n        // Abrir WhatsApp\n        window.open(whatsappURL, '_blank', 'width=600,height=700');\n\n        // Mostrar confirmaci√≥n\n        setTimeout(() => {\n          const success = confirm('‚úÖ ¬øSe abri√≥ WhatsApp correctamente? Si no se abri√≥, copia este mensaje y env√≠alo manualmente.');\n          if (!success) {\n            // Opci√≥n para copiar el mensaje manualmente\n            this.copyMessageToClipboard(message);\n          }\n        }, 1000);\n      } catch (error) {\n        console.error('Error al enviar mensaje:', error);\n        alert('Error al abrir WhatsApp. Por favor intenta nuevamente.');\n      }\n    },\n    copyMessageToClipboard(encodedMessage) {\n      // Decodificar el mensaje para mostrarlo al usuario\n      const decodedMessage = decodeURIComponent(encodedMessage.replace(/%0A/g, '\\n'));\n      navigator.clipboard.writeText(decodedMessage).then(() => {\n        alert('Mensaje copiado al portapapeles. P√©galo en WhatsApp manualmente.');\n      });\n    }\n  }\n};","map":{"version":3,"names":["AppHeader","name","components","data","cartItems","cartCount","customerInfo","phone","email","showWhatsAppModal","pigmaprintWhatsApp","computed","canSubmitQuote","length","trim","mounted","loadCart","methods","savedCart","localStorage","getItem","JSON","parse","getProductIcon","productType","icons","camiseta","taza","termo","gorra","vaso","hoodie","otros","formatDate","dateString","date","Date","toLocaleDateString","day","month","year","hour","minute","formatPhoneForDisplay","cleaned","replace","substring","formatPhoneForWhatsApp","startsWith","removeItem","itemId","filter","item","id","saveCart","clearCart","confirm","setItem","stringify","proceedToCheckout","alert","formattedPhone","closeWhatsAppModal","openWhatsApp","orderData","items","totalItems","orderDate","toISOString","orderReference","now","toString","slice","sendWhatsAppMessage","formattedNumber","console","log","message","forEach","index","productName","fileName","notes","reference","whatsappURL","window","open","setTimeout","success","copyMessageToClipboard","error","encodedMessage","decodedMessage","decodeURIComponent","navigator","clipboard","writeText","then"],"sources":["/home/jorge/Escritorio/Jorge-PC/Marlen/pigmaprint-marlen-romero/src/views/Home.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\n    <AppHeader :cart-count=\"cartCount\" />\n    \n    <main class=\"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n      <div class=\"max-w-6xl mx-auto\">\n        <!-- Header del Carrito -->\n        <div class=\"text-center mb-12\">\n          <h1 class=\"text-4xl sm:text-5xl font-extrabold tracking-tight bg-gradient-to-r from-purple-600 to-blue-500 bg-clip-text text-transparent\">\n            Tu Carrito\n          </h1>\n          <p class=\"mt-4 text-lg text-gray-600 dark:text-gray-300\">\n            Revisa y gestiona tus productos personalizados\n          </p>\n        </div>\n\n        <!-- Carrito Vac√≠o -->\n        <div v-if=\"cartItems.length === 0\" class=\"text-center bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12\">\n          <div class=\"text-6xl text-purple-400 mb-6\">\n            <span class=\"material-symbols-outlined\">shopping_cart</span>\n          </div>\n          <h3 class=\"text-2xl font-bold text-gray-800 dark:text-white mb-4\">\n            Tu carrito est√° vac√≠o\n          </h3>\n          <p class=\"text-gray-600 dark:text-gray-300 mb-8 max-w-md mx-auto\">\n            Agrega algunos productos personalizados para comenzar tu pedido.\n          </p>\n          <button \n            @click=\"$router.push('/')\"\n            class=\"px-8 py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:from-purple-600 hover:to-blue-600 transition-all duration-300 transform hover:-translate-y-0.5\"\n          >\n            <span class=\"material-symbols-outlined align-middle mr-2\">add_circle</span>\n            Agregar Productos\n          </button>\n        </div>\n\n        <!-- Carrito con Productos -->\n        <div v-else class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <!-- Lista de Productos -->\n          <div class=\"lg:col-span-2 space-y-6\">\n            <!-- Productos -->\n            <div \n              v-for=\"item in cartItems\" \n              :key=\"item.id\"\n              class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl\"\n            >\n              <div class=\"flex flex-col sm:flex-row gap-6\">\n                <!-- Icono del Producto -->\n                <div class=\"flex-shrink-0 w-20 h-20 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center\">\n                  <span class=\"material-symbols-outlined text-3xl text-purple-600 dark:text-purple-400\">\n                    {{ getProductIcon(item.productType) }}\n                  </span>\n                </div>\n\n                <!-- Informaci√≥n del Producto -->\n                <div class=\"flex-grow\">\n                  <div class=\"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4\">\n                    <div>\n                      <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-2\">\n                        {{ item.productName }}\n                      </h3>\n                      <p class=\"text-gray-600 dark:text-gray-300 text-sm\">\n                        Archivo: {{ item.fileName }}\n                      </p>\n                      <p v-if=\"item.notes\" class=\"text-gray-500 dark:text-gray-400 text-sm mt-2\">\n                        Notas: {{ item.notes }}\n                      </p>\n                    </div>\n                    \n                    <!-- Precio (placeholder) -->\n                    <div class=\"mt-2 sm:mt-0 text-right\">\n                      <p class=\"text-lg font-bold text-purple-600 dark:text-purple-400\">\n                        Por cotizar\n                      </p>\n                      <p class=\"text-sm text-gray-500 dark:text-gray-400\">\n                        Referencia: {{ item.reference }}\n                      </p>\n                    </div>\n                  </div>\n\n                  <!-- Acciones -->\n                  <div class=\"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <span class=\"text-sm text-gray-500 dark:text-gray-400\">\n                      Agregado: {{ formatDate(item.date) }}\n                    </span>\n                    \n                    <button \n                      @click=\"removeItem(item.id)\"\n                      class=\"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200 flex items-center\"\n                    >\n                      <span class=\"material-symbols-outlined text-lg mr-1\">delete</span>\n                      Eliminar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Resumen del Pedido -->\n          <div class=\"lg:col-span-1\">\n            <div class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 sticky top-6\">\n              <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-6\">\n                Resumen del Pedido\n              </h3>\n\n              <!-- Detalles -->\n              <div class=\"space-y-4 mb-6\">\n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Productos:</span>\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">\n                    {{ cartItems.length }}\n                  </span>\n                </div>\n                \n                <div class=\"flex justify-between items-center\">\n                  <span class=\"text-gray-600 dark:text-gray-300\">Estado:</span>\n                  <span class=\"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-full text-sm font-medium\">\n                    Por cotizar\n                  </span>\n                </div>\n              </div>\n\n              <!-- Informaci√≥n del Cliente -->\n              <div class=\"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl\">\n                <h4 class=\"font-semibold text-gray-800 dark:text-white mb-3\">\n                  <span class=\"material-symbols-outlined align-middle mr-2 text-purple-500\">person</span>\n                  Informaci√≥n de Contacto\n                </h4>\n                <div class=\"space-y-3\">\n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      Tu Nombre *\n                    </label>\n                    <input \n                      v-model=\"customerInfo.name\"\n                      type=\"text\"\n                      class=\"w-full rounded-lg p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300\"\n                      placeholder=\"Tu nombre completo\"\n                      required\n                    >\n                  </div>\n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      Tu N√∫mero de WhatsApp *\n                    </label>\n                    <input \n                      v-model=\"customerInfo.phone\"\n                      type=\"tel\"\n                      class=\"w-full rounded-lg p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300\"\n                      placeholder=\"50412345678\"\n                      required\n                    >\n                  </div>\n                  <div>\n                    <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      Tu Email\n                    </label>\n                    <input \n                      v-model=\"customerInfo.email\"\n                      type=\"email\"\n                      class=\"w-full rounded-lg p-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-600 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300\"\n                      placeholder=\"tu@email.com\"\n                    >\n                  </div>\n                </div>\n              </div>\n\n              <!-- Total -->\n              <div class=\"border-t border-gray-200 dark:border-gray-700 pt-4 mb-6\">\n                <div class=\"flex justify-between items-center text-lg font-bold\">\n                  <span class=\"text-gray-800 dark:text-white\">Total estimado:</span>\n                  <span class=\"text-purple-600 dark:text-purple-400\">\n                    Por cotizar\n                  </span>\n                </div>\n                <p class=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">\n                  * Los precios finales ser√°n confirmados por nuestro equipo\n                </p>\n              </div>\n\n              <!-- Botones de Acci√≥n -->\n              <div class=\"space-y-4\">\n                <button \n                  @click=\"proceedToCheckout\"\n                  :disabled=\"!canSubmitQuote\"\n                  :class=\"[\n                    'w-full px-6 py-4 rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 flex items-center justify-center',\n                    canSubmitQuote\n                      ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:shadow-xl hover:from-green-600 hover:to-emerald-700'\n                      : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                  ]\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">whatsapp</span>\n                  Solicitar Cotizaci√≥n por WhatsApp\n                </button>\n                \n                <button \n                  @click=\"$router.push('/')\"\n                  class=\"w-full px-6 py-4 border-2 border-purple-500 text-purple-600 dark:text-purple-400 dark:border-purple-400 rounded-xl font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all duration-300 flex items-center justify-center\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">add_circle</span>\n                  Agregar M√°s Productos\n                </button>\n                \n                <button \n                  @click=\"clearCart\"\n                  class=\"w-full px-6 py-4 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200 flex items-center justify-center\"\n                >\n                  <span class=\"material-symbols-outlined mr-2\">delete_sweep</span>\n                  Vaciar Carrito\n                </button>\n              </div>\n\n              <!-- Informaci√≥n Adicional -->\n              <div class=\"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n                <div class=\"flex items-start space-x-3\">\n                  <span class=\"material-symbols-outlined text-blue-500 text-lg mt-0.5\">info</span>\n                  <div>\n                    <p class=\"text-sm text-blue-700 dark:text-blue-300\">\n                      Al hacer clic se abrir√° WhatsApp con todos los detalles de tu pedido.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n\n    <!-- Modal de Confirmaci√≥n WhatsApp -->\n    <transition name=\"modal-fade\">\n      <div \n        v-if=\"showWhatsAppModal\" \n        class=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-all duration-300\"\n        @click.self=\"closeWhatsAppModal\"\n      >\n        <div class=\"relative bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-500 scale-95 hover:scale-100\">\n          <!-- Header -->\n          <div class=\"bg-gradient-to-r from-green-500 to-emerald-600 rounded-t-3xl p-8 text-center\">\n            <div class=\"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm\">\n              <span class=\"material-symbols-outlined text-4xl text-white\">\n                whatsapp\n              </span>\n            </div>\n            <h3 class=\"text-2xl font-bold text-white mb-2\">\n              ¬°Listo para WhatsApp!\n            </h3>\n            <p class=\"text-white/90\">\n              Confirma tu informaci√≥n de contacto\n            </p>\n          </div>\n\n          <!-- Contenido -->\n          <div class=\"p-6\">\n            <div class=\"space-y-4 mb-6\">\n              <div class=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                <p class=\"text-sm text-gray-600 dark:text-gray-300 mb-2\">Enviar cotizaci√≥n a:</p>\n                <p class=\"font-semibold text-gray-800 dark:text-white\">{{ customerInfo.name }}</p>\n                <p class=\"text-gray-600 dark:text-gray-300\">{{ this.formatPhoneForDisplay(customerInfo.phone) }}</p>\n                <p v-if=\"customerInfo.email\" class=\"text-gray-500 dark:text-gray-400 text-sm\">{{ customerInfo.email }}</p>\n              </div>\n\n              <div class=\"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800\">\n                <p class=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  üì± Se abrir√° WhatsApp. Por favor <strong>env√≠a el mensaje</strong> para completar tu solicitud.\n                </p>\n              </div>\n            </div>\n\n            <!-- Botones -->\n            <div class=\"flex flex-col gap-3\">\n              <button \n                @click=\"openWhatsApp\"\n                class=\"w-full px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-300 transform hover:-translate-y-0.5 flex items-center justify-center\"\n              >\n                <span class=\"material-symbols-outlined mr-2\">send</span>\n                Abrir WhatsApp\n              </button>\n              \n              <button \n                @click=\"closeWhatsAppModal\"\n                class=\"w-full px-6 py-4 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-300\"\n              >\n                Editar Informaci√≥n\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport AppHeader from '@/components/Header.vue'\n\nexport default {\n  name: 'CartView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      cartItems: [],\n      cartCount: 0,\n      customerInfo: {\n        name: '',\n        phone: '',\n        email: ''\n      },\n      showWhatsAppModal: false,\n      // CAMBIA ESTE N√öMERO POR EL N√öMERO DE PIGMAPRINT\n      pigmaprintWhatsApp: '50495737387' // Sin el s√≠mbolo +\n    }\n  },\n  computed: {\n    canSubmitQuote() {\n      return this.cartItems.length > 0 && \n             this.customerInfo.name.trim() !== '' && \n             this.customerInfo.phone.trim() !== ''\n    }\n  },\n  mounted() {\n    this.loadCart()\n  },\n  methods: {\n    loadCart() {\n      const savedCart = localStorage.getItem('pigmaprint_cart')\n      if (savedCart) {\n        this.cartItems = JSON.parse(savedCart)\n        this.cartCount = this.cartItems.length\n      }\n    },\n    \n    getProductIcon(productType) {\n      const icons = {\n        camiseta: 'checkroom',\n        taza: 'coffee',\n        termo: 'water_bottle',\n        gorra: 'sports_baseball',\n        vaso: 'liquor',\n        hoodie: 'account_circle',\n        otros: 'category'\n      }\n      return icons[productType] || 'category'\n    },\n    \n    formatDate(dateString) {\n      const date = new Date(dateString)\n      return date.toLocaleDateString('es-ES', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    },\n\n    formatPhoneForDisplay(phone) {\n      // Formatear para mostrar: +504 1234 5678\n      if (!phone) return ''\n      const cleaned = phone.replace(/\\D/g, '')\n      if (cleaned.length === 8) {\n        return `+504 ${cleaned.substring(0,4)} ${cleaned.substring(4)}`\n      }\n      return `+${cleaned}`\n    },\n\n    formatPhoneForWhatsApp(phone) {\n      // Formatear para WhatsApp: 50412345678\n      if (!phone) return ''\n      const cleaned = phone.replace(/\\D/g, '')\n      // Si el n√∫mero empieza con 504, dejarlo como est√°\n      if (cleaned.startsWith('504')) {\n        return cleaned\n      }\n      // Si es un n√∫mero local (8 d√≠gitos), agregar c√≥digo de pa√≠s\n      if (cleaned.length === 8) {\n        return '504' + cleaned\n      }\n      return cleaned\n    },\n    \n    removeItem(itemId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId)\n      this.saveCart()\n      this.cartCount = this.cartItems.length\n    },\n    \n    clearCart() {\n      if (confirm('¬øEst√°s seguro de que quieres vaciar el carrito?')) {\n        this.cartItems = []\n        this.saveCart()\n        this.cartCount = 0\n      }\n    },\n    \n    saveCart() {\n      localStorage.setItem('pigmaprint_cart', JSON.stringify(this.cartItems))\n    },\n    \n    proceedToCheckout() {\n      if (!this.canSubmitQuote) {\n        alert('Por favor completa tu informaci√≥n de contacto (nombre y WhatsApp)')\n        return\n      }\n      \n      // Validar formato del tel√©fono\n      const formattedPhone = this.formatPhoneForWhatsApp(this.customerInfo.phone)\n      if (formattedPhone.length < 8) {\n        alert('Por favor ingresa un n√∫mero de WhatsApp v√°lido')\n        return\n      }\n      \n      // Mostrar modal de confirmaci√≥n\n      this.showWhatsAppModal = true\n    },\n    \n    closeWhatsAppModal() {\n      this.showWhatsAppModal = false\n    },\n    \n    openWhatsApp() {\n      const orderData = {\n        items: this.cartItems,\n        customerInfo: this.customerInfo,\n        totalItems: this.cartItems.length,\n        orderDate: new Date().toISOString(),\n        orderReference: 'PM-' + Date.now().toString().slice(-8)\n      }\n      \n      this.sendWhatsAppMessage(orderData)\n      this.closeWhatsAppModal()\n    },\n    \n    sendWhatsAppMessage(orderData) {\n      try {\n        // Formatear el n√∫mero correctamente\n        const formattedNumber = this.formatPhoneForWhatsApp(this.pigmaprintWhatsApp)\n        \n        if (!formattedNumber) {\n          alert('Error: N√∫mero de WhatsApp no configurado correctamente')\n          return\n        }\n\n        console.log('N√∫mero formateado para WhatsApp:', formattedNumber)\n        \n        // Construir el mensaje\n        let message = `¬°Hola Pigmaprint! üëã%0A%0A`\n        message += `Solicito cotizaci√≥n para los siguientes productos:%0A%0A`\n        \n        message += `*üìã Informaci√≥n del Cliente:*%0A`\n        message += `üë§ Nombre: ${orderData.customerInfo.name}%0A`\n        message += `üìû WhatsApp: ${this.formatPhoneForDisplay(orderData.customerInfo.phone)}%0A`\n        if (orderData.customerInfo.email) {\n          message += `üìß Email: ${orderData.customerInfo.email}%0A`\n        }\n        \n        message += `%0A*üì¶ Detalles del Pedido:*%0A`\n        message += `üîñ Referencia: ${orderData.orderReference}%0A`\n        message += `üìÖ Fecha: ${this.formatDate(orderData.orderDate)}%0A`\n        message += `üõí Total productos: ${orderData.totalItems}%0A%0A`\n        \n        message += `*üé® Productos Solicitados:*%0A%0A`\n        orderData.items.forEach((item, index) => {\n          message += `*${index + 1}. ${item.productName}*%0A`\n          message += `üìé Archivo: ${item.fileName}%0A`\n          if (item.notes) {\n            message += `üìù Notas: ${item.notes}%0A`\n          }\n          message += `üîñ Ref: ${item.reference}%0A%0A`\n        })\n        \n        message += `*üí¨ Informaci√≥n Adicional:*%0A`\n        message += `Por favor env√≠enme la cotizaci√≥n para estos productos. ¬°Gracias! üôè%0A%0A`\n        message += `_Generado desde pigmaprint.com_`\n        \n        // Crear la URL de WhatsApp\n        const whatsappURL = `https://wa.me/${formattedNumber}?text=${message}`\n        \n        console.log('URL completa de WhatsApp:', whatsappURL)\n        \n        // Abrir WhatsApp\n        window.open(whatsappURL, '_blank', 'width=600,height=700')\n        \n        // Mostrar confirmaci√≥n\n        setTimeout(() => {\n          const success = confirm('‚úÖ ¬øSe abri√≥ WhatsApp correctamente? Si no se abri√≥, copia este mensaje y env√≠alo manualmente.')\n          if (!success) {\n            // Opci√≥n para copiar el mensaje manualmente\n            this.copyMessageToClipboard(message)\n          }\n        }, 1000)\n        \n      } catch (error) {\n        console.error('Error al enviar mensaje:', error)\n        alert('Error al abrir WhatsApp. Por favor intenta nuevamente.')\n      }\n    },\n\n    copyMessageToClipboard(encodedMessage) {\n      // Decodificar el mensaje para mostrarlo al usuario\n      const decodedMessage = decodeURIComponent(encodedMessage.replace(/%0A/g, '\\n'))\n      navigator.clipboard.writeText(decodedMessage).then(() => {\n        alert('Mensaje copiado al portapapeles. P√©galo en WhatsApp manualmente.')\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}